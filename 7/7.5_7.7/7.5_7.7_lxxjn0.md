# Real-MySQL 7.5 - 7.7

## 7.5 INSERT

MySQL에서 `insert`를 하는 방법은 다양하게 있다. 여러 방법들에서 상황에 적절한 `insert` 쿼리를 익혀두면 성능 개선 효과를 기대할 수 있을 것이다.

### 7.5.1 INSERT와 AUTO_INCREMENT

MySQL에는 순차적으로 증가하는 숫자 값을 가져오는 `auto_increment`라는 기능을 제공한다. 이는 테이블의 칼럼에 부여되는 옵션이기 때문에 하나의 테이블에서만 순차적으로 값이 증가한다.

만약 여러 테이블에 동시에 사용할 수 있는 `auto_increment` 기능이 필요하다면 별도의 테이블을 생성하여 사용할 수 있다(16.4 MySQL 시퀀스 구현 참고)

#### AUTO_INCREMENT 제약 및 특성

```mysql
create table tb_autoincrement (
    member_id int not null auto_increment,
    member_name varchar(30) not null,
    primary key (member_id)
) engine=INNODB;
```

테이블의 칼럼에 `auto_increment` 속성을 부여하면 된다.

```mysql
insert into tb_autoincrement (member_name) values ('lxxjn0');
insert into tb_autoincrement (member_id, member_name) values (5, 'lxxjn0');
```

- 첫 번째 `insert` 쿼리처럼 `auto_increment` 속성으로 정의된 칼럼은 별도로 값을 할당하지 않고 사용한다.

  - `member_id` 칼럼이 `not null` 칼럼이지만 별도의 값이 지정되지 않았다.

- 두 번째 `insert` 쿼리는 `auto_increment` 속성으로 정의된 칼럼에 값을 강제로 할당했다.

  - 이런 경우 지정된 값으로 컬럼에 저장한다.

  - 만약 값을 할당하는데 `auto_increment`의 현재 값을 저장하고 싶다면 0 또는 null을 지정하면 된다.

여기서 두 번째와 같은 방법을 사용할 경우 `auto_increment`의 현재 값이 갱신된다.

- 지정한 값이 `auto_increment`의 현재 값보다 **작을 경우** `auto_increment`의 현재 값이 변하지 않는다.

- 지정한 값이 `auto_increment`의 현재 값보다 **클 경우** `auto_increment`의 값을 `지정한 값 + 1`로 설정한다.

> `auto_increment`의 칼럼에 0을 `insert` 하고 싶다면 `sql_mode` 시스템 변수에 `"no_auto_value_on_zero"` 값을 추가하면 된다.

